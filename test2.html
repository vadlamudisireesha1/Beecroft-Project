<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
  :root{
    --sidebar-w:270px;
    --bg:#212529;
    --submenu-bg:#000;
    --hover:#5fa9ae;
    --text:#fff;
  }

  body{
    margin:0;
    font-family: system-ui, sans-serif;
    background:#111;
    color:#ddd;
  }

  .sidebar{
    width:var(--sidebar-w);
    background:var(--bg);
    color:var(--text);
    height:100vh;
    overflow-y:auto;
    padding-top:10px;
    box-shadow:2px 0 8px rgba(0,0,0,.2);
    border-radius:20px;
    position:fixed;
    top:0;
    left:0;
  }

  main{
    margin-left:var(--sidebar-w);
    padding:25px;
  }

  /* menu rows */
  .menu-item{
    display:flex;
    justify-content:space-between;
    align-items:center;           /* vertical center */
    padding:14px 20px;
    cursor:pointer;
    font-size:16px;
    font-weight:500;
    transition:background .2s;
  }
  .menu-item:hover{
    background:rgba(255,255,255,.04);
  }
  .menu-item-content{
    display:flex;
    align-items:center;           /* icon + text aligned */
    gap:12px;                     /* space between icon & text */
    min-width:0;                  /* allow label to shrink if needed */
  }
  .menu-item i{
    font-size:18px;
    width:20px;                   /* keeps icons aligned */
    text-align:center;
    flex:0 0 20px;
  }
  .menu-item .label{
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .arrow{
    font-size:12px;
    transition:transform .25s;
  }
  .menu-item.open .arrow{
    transform:rotate(90deg);
  }

  /* submenu */
  .submenu{
    list-style:none;
    padding:0;
    margin:0;
    background:var(--submenu-bg);
    max-height:0;
    overflow:hidden;
    transition:max-height .25s ease;
  }
  .submenu.show{
    max-height:500px;             /* big enough for your items */
  }
  .submenu li{
    padding:10px 35px;
    border-bottom:1px solid rgba(255,255,255,.05);
    font-size:14px;
    cursor:pointer;
    transition:background .15s;
  }
  .submenu li:hover{
    background:var(--hover);
  }

  /* scrollbar */
  .sidebar::-webkit-scrollbar{ width:6px; }
  .sidebar::-webkit-scrollbar-thumb{
    background-color:rgba(255,255,255,.3);
    border-radius:3px;
  }
</style>
</head>
<body>

<div class="sidebar" id="sidebar"></div>
<main id="content">
  <h1>Content Area</h1>
  <p>Click items on the left.</p>
</main>

<script>
const menu = [
  { title: "Appointments",           icon: "fa-calendar",     submenu: ["New Appointment", "Reschedule Appointment", "Cancel Appointment"] },
  { title: "Hospitalization",        icon: "fa-hospital",     submenu: ["Admitted"] },
  { title: "Medication Enquiries",   icon: "fa-pills",        submenu: ["Medication Enquiries"] },
  { title: "Department Enquiries",   icon: "fa-building",     submenu: ["Avian and Exotics", "Cardiology", "Internal Medicine", "Outpatient Imaging (MRI/CT/Ultrasound scan etc.)", "Neurology", "Surgery", "Veterinary Rehabilitation & Hydrotherapy"] },
  { title: "Request a Callback",     icon: "fa-phone",        submenu: ["Request a Callback"] },
  { title: "Pay Deposit",            icon: "fa-credit-card",  submenu: ["Payment Deposit Enquiries", "Refund Enquiries", "Billing Enquiries"] },
  { title: "Users",                  icon: "fa-users",        submenu: [] }, // No submenu for Users
  { title: "Log Out",                icon: "fa-right-from-bracket", submenu: [] }
];

const sidebar = document.getElementById('sidebar');
const content = document.getElementById('content');

menu.forEach(item => {
  const hasSubmenu = item.submenu && item.submenu.length > 0 && item.title !== "Users";

  const menuItem = document.createElement("div");
  menuItem.classList.add("menu-item");

  // Create icon + text container
  const contentDiv = document.createElement("div");
  contentDiv.classList.add("menu-item-content");
  contentDiv.innerHTML = `
    <i class="fa-solid ${item.icon}"></i>
    <span class="label">${item.title}</span>
  `;
  menuItem.appendChild(contentDiv);

  let arrow = null;
  if (hasSubmenu) {
    arrow = document.createElement("span");
    arrow.classList.add("arrow");
    arrow.innerHTML = "&#9662;"; // â–¼
    menuItem.appendChild(arrow);
  }

  sidebar.appendChild(menuItem);

  // Direct click for "Users"
  if (item.title === "Users") {
    menuItem.addEventListener("click", () => {
      content.innerHTML = Users();
      setTimeout(() => $('#UsersTable').DataTable(), 0);
    });
    return;
  }

  // Direct click for "Log Out"
  if (item.title === "Log Out") {
    menuItem.addEventListener("click", () => logoutUser());
    return;
  }

  // Create submenu if exists
  if (hasSubmenu) {
    const submenu = document.createElement("ul");
    submenu.classList.add("submenu");

    item.submenu.forEach(sub => {
      const li = document.createElement("li");
      li.textContent = sub;

      li.addEventListener("click", (e) => {
        e.stopPropagation();
        // Handle submenu click
        if (sub === "New Appointment") {
          content.innerHTML = NewAppointment();
          setTimeout(() => $('#newappointmentTable').DataTable(), 0);
        }
        else if (sub === "Reschedule Appointment") {
          content.innerHTML = RescheduleAppointment();
          setTimeout(() => $('#rescheduleappointmentTable').DataTable(), 0);
        }
        else if (sub === "Cancel Appointment") {
          content.innerHTML = CancelAppointment();
          setTimeout(() => $('#cancelappointmentTable').DataTable(), 0);
        }
        else if (sub === "Admitted") {
          content.innerHTML = Admitted();
          setTimeout(() => $('#AdmittedTable').DataTable(), 0);
        }
        else if (sub === "Medication Enquiries") {
          content.innerHTML = MedicationEnquiries();
          setTimeout(() => $('#MedicationEnquiriesTable').DataTable(), 0);
        }
        else if (sub === "Avian and Exotics") {
          content.innerHTML = AvianandExotics();
          setTimeout(() => $('#AvianandExoticsTable').DataTable(), 0);
        }
        else if (sub === "Cardiology") {
          content.innerHTML = Cardiology();
          setTimeout(() => $('#CardiologyTable').DataTable(), 0);
        }
        else if (sub === "Internal Medicine") {
          content.innerHTML = InternalMedicine();
          setTimeout(() => $('#InternalMedicineTable').DataTable(), 0);
        }
        else if (item.title === "Department Enquiries" && sub === "Outpatient Imaging (MRI/CT/Ultrasound scan etc.)") {
          content.innerHTML = OutpatientImaging();
          setTimeout(() => $('#OutpatientImagingTable').DataTable(), 0);
        }
        else if (sub === "Neurology") {
          content.innerHTML = Neurology();
          setTimeout(() => $('#NeurologyTable').DataTable(), 0);
        }
        else if (sub === "Surgery") {
          content.innerHTML = Surgery();
          setTimeout(() => $('#SurgeryTable').DataTable(), 0);
        }
        else if (sub === "Veterinary Rehabilitation & Hydrotherapy") {
          content.innerHTML = VeterinaryRehabilitationHydrotherapy();
          setTimeout(() => $('#VeterinaryRehabilitationHydrotherapyTable').DataTable(), 0);
        }
        else if (sub === "Request a Callback") {
          content.innerHTML = RequestaCallback();
          setTimeout(() => $('#RequestaCallbackTable').DataTable(), 0);
        }
        else if (sub === "Payment Deposit Enquiries") {
          content.innerHTML = PaymentDepositEnquiries();
          setTimeout(() => $('#PaymentDepositEnquiriesTable').DataTable(), 0);
        }
        else if (sub === "Refund Enquiries") {
          content.innerHTML = RefundEnquiries();
          setTimeout(() => $('#RefundEnquiriesTable').DataTable(), 0);
        }
        else if (sub === "Billing Enquiries") {
          content.innerHTML = BillingEnquiries();
          setTimeout(() => $('#BillingEnquiriesTable').DataTable(), 0);
        }
        else {
          content.innerHTML = `<h1>${item.title}</h1><p>You selected <b>${sub}</b></p>`;
        }
      });

      submenu.appendChild(li);
    });

    sidebar.appendChild(submenu);

    // Toggle submenu on click
    menuItem.addEventListener("click", () => {
      const isVisible = submenu.classList.contains("show");
      document.querySelectorAll(".submenu").forEach(sm => sm.classList.remove("show"));
      document.querySelectorAll(".arrow").forEach(a => a.classList.remove("rotate"));
      if (!isVisible) {
        submenu.classList.add("show");
        if (arrow) arrow.classList.add("rotate");
      }
    });
  }
});
function Users() {
  return `
    <div>
      <h1>Users</h1>
      <table id="UsersTable" class="display">
        <thead>
          <tr>
            <th>Name</th>
            <th>Mobile No</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>John Doe</td>
            <td>9876543210</td>
            <td>Active</td>
            <td><button onClick="alert('John Doe - 9876543210 - Active')">Edit</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  `;
}


</script>
</body>
</html>
